<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>SafeRoad AI - Dual Core</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #0f172a, #1e293b); color: white; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .card { background: rgba(255,255,255,0.95); padding: 30px; border-radius: 20px; color: #333; width: 400px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        h1 { margin: 0; font-size: 24px; }
        .badge { background: #3b82f6; color: white; padding: 5px 10px; border-radius: 20px; font-size: 12px; vertical-align: middle; }
        
        .form-group { margin: 15px 0; text-align: left; }
        label { font-weight: bold; display: block; margin-bottom: 5px; font-size: 14px; }
        select, input { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ccc; box-sizing: border-box; }
        
        /* Estilo especial para el selector de IA */
        .ai-selector { border: 2px solid #6366f1; background: #eef2ff; color: #4338ca; font-weight: bold; }

        button { width: 100%; padding: 15px; background: #2563eb; color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        button:hover { background: #1d4ed8; }

        .result { margin-top: 20px; padding: 15px; border-radius: 10px; text-align: center; animation: popIn 0.3s; }
        .danger { background: #fee2e2; color: #991b1b; border: 1px solid red; }
        .safe { background: #dcfce7; color: #166534; border: 1px solid green; }
        @keyframes popIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body>

<div class="card">
    <h1>üö¶ SafeRoad AI <span class="badge">v2.0</span></h1>
    <p style="color:#666; margin-top:5px;">Sistema Predictivo H√≠brido</p>

    <form method="POST">
        {% csrf_token %}
        
        <div class="form-group">
            <label>üß† Selecciona el Motor de IA:</label>
            <select name="modelo_seleccionado" class="ai-selector">
                <option value="rf" {% if modelo_actual == 'rf' %}selected{% endif %}>Random Forest (Cl√°sico)</option>
                <option value="lstm" {% if modelo_actual == 'lstm' %}selected{% endif %}>Red Neuronal LSTM (Avanzado)</option>
            </select>
        </div>

        <div class="form-group">
            <label>üåßÔ∏è Clima:</label>
            <select name="lluvia">
                <option value="0" {% if lluvia == 0 %}selected{% endif %}>Despejado</option>
                <option value="1" {% if lluvia == 1 %}selected{% endif %}>Lluvia</option>
            </select>
        </div>

        <div class="form-group">
            <label>üöó Tr√°fico (0-10): <strong id="tVal">{{trafico}}</strong></label>
            <input type="range" name="trafico" min="0" max="10" value="{{trafico}}" oninput="document.getElementById('tVal').innerText=this.value">
        </div>

        <div class="form-group">
            <label>‚ö° Velocidad (km/h): <strong id="vVal">{{velocidad}}</strong></label>
            <input type="range" name="velocidad" min="0" max="120" value="{{velocidad}}" oninput="document.getElementById('vVal').innerText=this.value">
        </div>

        <button type="submit">Ejecutar An√°lisis</button>
    </form>

    {% if resultado %}
        <div class="result {% if resultado.riesgo == 1 %}danger{% else %}safe{% endif %}">
            <small style="text-transform: uppercase; letter-spacing: 1px;">{{ resultado.origen }}</small>
            <h2 style="margin: 10px 0;">{{ resultado.mensaje }}</h2>
            <p>Probabilidad: <strong>{{ resultado.probabilidad }}%</strong></p>
        </div>
    {% endif %}
</div>

</body>
</html>